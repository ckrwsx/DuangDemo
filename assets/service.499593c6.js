import{d as N,T as Y,n as p,D as q,q as B,A as O,c as y,b as d,N as u,u as t,e as l,w as r,o as m,U as S,V as I,W as j,X as F,I as M,h as R,j as U}from"./index.7562f36e.js";import{a as T,b as z,E as J,c as W,d as $}from"./el-form-item.2cdb197b.js";/* empty css                */import{a as G,E as L}from"./el-radio-button.3575f90c.js";import{g as X}from"./index.995523da.js";const Z={style:{color:"#9f2743","font-size":"24px"}},H={class:"footer"},K=N({__name:"service",emits:["editActive"],setup(Q,{emit:f}){const s=Y(),a=p({}),E=q({product_name:[{required:!0,message:"product_name is Empty",trigger:"blur"}],start_date:[{required:!0,message:"start_date is Empty",trigger:"blur"}],end_date:[{required:!0,message:"end_date is Empty",trigger:"blur"}],channel_id:[{required:!0,message:"channel_id is Empty",trigger:"blur"}]}),v=p(),V=()=>{f("editActive",1)},k=()=>{v.value.validate(async n=>{if(n){Object.assign(s.info,a.value);let e=j(),_="WA"+e;Object.assign(s.info,{order_no:_}),f("editActive",3)}})},P=()=>{const n=c.value.filter(e=>e.id===a.value.product_id);Object.assign(s.info,...n)},h=()=>{a.value.end_date=F(a.value.start_date,366)},g=n=>n.getTime()<Date.now();B(()=>s.info,()=>{a.value=JSON.parse(JSON.stringify(s.info))},{immediate:!0}),O(()=>{x()});const c=p([]),x=async()=>{const n=await X();c.value=n.message};return(n,e)=>{const _=T,D=z,i=J,b=G,C=L,w=W,A=$;return m(),y("div",null,[d("h1",null,"Choose Suitable Coverage For "+u(t(s).info.owner_name),1),d("div",null,[l(w,{ref_key:"serviceRef",ref:v,"label-position":"left","hide-required-asterisk":"",model:t(a),rules:t(E),class:"serviceClass","label-width":"150px"},{default:r(()=>[l(i,{label:"Owner Name",prop:"product_id"},{default:r(()=>[l(D,{modelValue:t(a).product_id,"onUpdate:modelValue":e[0]||(e[0]=o=>t(a).product_id=o),class:"radioBtn",onChange:P},{default:r(()=>[(m(!0),y(S,null,I(t(c),o=>(m(),M(_,{key:o.id,label:o.id},{default:r(()=>[R(u(o.product_name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"Insured Period",prop:"start_date"},{default:r(()=>[l(b,{modelValue:t(a).start_date,"onUpdate:modelValue":e[1]||(e[1]=o=>t(a).start_date=o),type:"date",placeholder:"Pick a day","disabled-date":g,"value-format":"YYYY-MM-DD",onChange:h},null,8,["modelValue"])]),_:1}),l(i,{label:"Insured Period",prop:"end_date"},{default:r(()=>[l(b,{modelValue:t(a).end_date,"onUpdate:modelValue":e[2]||(e[2]=o=>t(a).end_date=o),type:"date",disabled:"",placeholder:"Pick a day","disabled-date":g,"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),l(i,{label:"Promotion Code",prop:"channel_id"},{default:r(()=>[l(C,{modelValue:t(a).channel_id,"onUpdate:modelValue":e[3]||(e[3]=o=>t(a).channel_id=o)},null,8,["modelValue"])]),_:1}),l(i,{label:"Premium",prop:"premium"},{default:r(()=>[d("p",null,u(t(s).info.premium||0)+".00 ",1)]),_:1}),l(i,{label:"Service Charge",prop:"service_charge"},{default:r(()=>[d("p",null,u(t(s).info.service_charge||0)+".00 ",1)]),_:1}),l(i,{label:"Total",prop:"total"},{default:r(()=>[d("p",Z,u(t(s).info.total||0)+".00",1)]),_:1})]),_:1},8,["model","rules"])]),d("div",H,[l(A,{position:"bottom",offset:20},{default:r(()=>[d("div",{class:"prezhua",onClick:e[4]||(e[4]=o=>V())},"\u4E0A\u4E00\u9875"),d("div",{class:"nextZhua",onClick:e[5]||(e[5]=o=>k())})]),_:1})])])}}});const re=U(K,[["__scopeId","data-v-2bd997d1"]]);export{re as default};
